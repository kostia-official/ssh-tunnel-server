{"version":3,"sources":["tests.js"],"names":["test","require","app","request","post","send","expect","serial","t","res","is","body","status","host","close","console","log"],"mappings":";;;;;AAAA,IAAIA,OAAOC,QAAQ,KAAR,CAAX;AACA,IAAIC,MAAMD,QAAQ,QAAR,CAAV;AACA,IAAIE,UAAUF,QAAQ,oBAAR,EAA8BC,GAA9B,CAAd;;AAEAF,KAAK,WAAL,EAAkB,YAAY;AAC5B,SAAOG,QAAQC,IAAR,CAAa,GAAb,EACJC,IADI,CACC;AACJ,YAAQ,WADJ;AAEJ,YAAQ,OAFJ;AAGJ,YAAQ;AAHJ,GADD,EAMJC,MANI,CAMG,GANH,CAAP;AAOD,CARD;;AAUAN,KAAKO,MAAL,CAAY,cAAZ,EAA4B,UAAUC,CAAV,EAAa;AACvC,SAAOL,QAAQC,IAAR,CAAa,GAAb,EACJC,IADI,CACC;AACJ,YAAQ,iBADJ;AAEJ,YAAQ,OAFJ;AAGJ,YAAQ;AAHJ,GADD,EAMJC,MANI,CAMG,GANH,EAOJA,MAPI,CAOG,UAAUG,GAAV,EAAe;AAAA;;AACrBD,MAAEE,EAAF,uBAAK,wDAAIC,IAAJ,wBAASC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAsB,oBAAtB;AACD,GATI,CAAP;AAUD,CAXD;;AAaAZ,KAAKO,MAAL,CAAY,eAAZ,EAA6B,UAAUC,CAAV,EAAa;AACxC,SAAOL,QAAQC,IAAR,CAAa,GAAb,EACJC,IADI,CACC;AACJQ,UAAM,iBADF;AAEJC,WAAO;AAFH,GADD,EAKJR,MALI,CAKG,GALH,EAMJA,MANI,CAMG,UAAUG,GAAV,EAAe;AAAA;;AACrBM,YAAQC,GAAR,CAAYP,IAAIE,IAAhB;AACAH,MAAEE,EAAF,yBAAK,0DAAIC,IAAJ,wBAASC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAsB,mBAAtB;AACD,GATI,CAAP;AAUD,CAXD;;AAaAZ,KAAK,kBAAL,EAAyB,UAAUQ,CAAV,EAAa;AACpC,SAAOL,QAAQC,IAAR,CAAa,GAAb,EACJC,IADI,CACC;AACJQ,UAAM,aADF;AAEJC,WAAO;AAFH,GADD,EAKJR,MALI,CAKG,GALH,CAAP;AAMD,CAPD","file":"tests.js","sourcesContent":["var test = require('ava');\nvar app = require('../app');\nvar request = require('supertest-promised')(app);\n\ntest('fail open', function () {\n  return request.post('/')\n    .send({\n      \"host\": \"1.1.1.999\",\n      \"user\": \"admin\",\n      \"pass\": \"admin\"\n    })\n    .expect(400);\n});\n\ntest.serial('success open', function (t) {\n  return request.post('/')\n    .send({\n      \"host\": \"197.211.242.121\",\n      \"user\": \"admin\",\n      \"pass\": \"admin\"\n    })\n    .expect(200)\n    .expect(function (res) {\n      t.is(res.body.status, 'Connection success');\n    });\n});\n\ntest.serial('success close', function (t) {\n  return request.post('/')\n    .send({\n      host: \"197.211.242.121\",\n      close: 1\n    })\n    .expect(200)\n    .expect(function (res) {\n      console.log(res.body);\n      t.is(res.body.status, 'Connection closed');\n    });\n});\n\ntest('close not opened', function (t) {\n  return request.post('/')\n    .send({\n      host: \"197.211.1.1\",\n      close: 1\n    })\n    .expect(400);\n});\n"]}