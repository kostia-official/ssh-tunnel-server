{"version":3,"sources":["open-close.test.js"],"names":["test","require","app","request","serial","connect","close","t","post","send","expect","res","is","body","status","host","tunport"],"mappings":";;;;;AAAA,IAAIA,OAAOC,QAAQ,KAAR,CAAX;AACA,IAAIC,MAAMD,QAAQ,QAAR,CAAV;AACA,IAAIE,UAAUF,QAAQ,oBAAR,EAA8BC,GAA9B,CAAd;;AAEAF,KAAKI,MAAL,CAAY,kBAAZ,EAAgCC,OAAhC;AACAL,KAAKI,MAAL,CAAY,uBAAZ,EAAqCC,OAArC;;AAEAL,KAAKI,MAAL,CAAY,aAAZ,EAA2BE,KAA3B;AACAN,KAAKI,MAAL,CAAY,kBAAZ,EAAgCE,KAAhC;;AAEA,SAASD,OAAT,CAAiBE,CAAjB,EAAoB;AAClB,SAAOJ,QAAQK,IAAR,CAAa,GAAb,EACJC,IADI,CACC;AACJ,YAAQ,gBADJ;AAEJ,YAAQ,SAFJ;AAGJ,YAAQ,SAHJ;AAIJ,eAAW;AAJP,GADD,EAOJC,MAPI,CAOG,GAPH,EAQJA,MARI,CAQG,UAAUC,GAAV,EAAe;AAAA;;AACrBJ,MAAEK,EAAF,uBAAK,wDAAIC,IAAJ,wBAASC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAsB,WAAtB;AACD,GAVI,CAAP;AAWD;;AAED,SAASR,KAAT,CAAeC,CAAf,EAAkB;AAChB,SAAOJ,QAAQK,IAAR,CAAa,GAAb,EACJC,IADI,CACC;AACJM,UAAM,gBADF;AAEJC,aAAS,IAFL;AAGJV,WAAO;AAHH,GADD,EAMJI,MANI,CAMG,GANH,EAOJA,MAPI,CAOG,UAAUC,GAAV,EAAe;AAAA;;AACrBJ,MAAEK,EAAF,yBAAK,0DAAIC,IAAJ,wBAASC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAsB,mBAAtB;AACD,GATI,CAAP;AAUD","file":"open-close.test.js","sourcesContent":["var test = require('ava');\nvar app = require('../app');\nvar request = require('supertest-promised')(app);\n\ntest.serial('first connection', connect);\ntest.serial('repetitive connection', connect);\n\ntest.serial('first close', close);\ntest.serial('repetitive close', close);\n\nfunction connect(t) {\n  return request.post('/')\n    .send({\n      \"host\": \"113.172.82.132\",\n      \"user\": \"support\",\n      \"pass\": \"support\",\n      \"tunport\": 1080\n    })\n    .expect(200)\n    .expect(function (res) {\n      t.is(res.body.status, 'Connected');\n    });\n}\n\nfunction close(t) {\n  return request.post('/')\n    .send({\n      host: \"113.172.82.132\",\n      tunport: 1080,\n      close: 1\n    })\n    .expect(200)\n    .expect(function (res) {\n      t.is(res.body.status, 'Connection closed');\n    });\n}\n"]}